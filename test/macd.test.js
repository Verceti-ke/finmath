import test from 'ava'
import {macd} from '../src'

const CASES = [
  [
    'normal',
    [
      [1, 2, 7, 13, 5, 6, 7, 8, 9, 10, 11, 12]
    ],

    {
      MACD: [
        0,
        0.07977207977207978,
        0.5402228878012356,
        1.373451037820645,
        1.3724366136156738,
        1.4357736132999195,
        1.5488066060633616,
        1.6994870806664757,
        1.877946289194084,
        2.0761357398730453,
        2.2875247882412006,
        2.5068464097462666
      ],
      signal: [
        0,
        0.01595441595441596,
        0.1208081103237799,
        0.371336695823153,
        0.5715566793816571,
        0.7444000661653096,
        0.9052813741449202,
        1.0641225154492313,
        1.2268872701982019,
        1.3967369641331706,
        1.5748945289547767,
        1.7612849051130746
      ],
      histogram: [
        0,
        0.12763532763532764,
        0.8388295549549114,
        2.004228683994984,
        1.6017598684680334,
        1.3827470942692197,
        1.287050463836883,
        1.2707291304344888,
        1.302118037991764,
        1.3587975514797495,
        1.425260518572848,
        1.491123009266384
      ]
    }
  ]
]

CASES.forEach(([d, args, expected]) => {
  test(d, t => {
    const result = macd(...args)
    t.deepEqual(result, expected)
  })
})
